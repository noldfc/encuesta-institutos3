<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Encuesta Instituto Chihuahua - Semestre 3</title>
  <style>
    :root {
      --primary: #2c3e50;
      --secondary: #2980b9;
      --accent: #f39c12;
      --background: #f4f4f4;
      --white: #fff;
      --error: #e74c3c;
    }
    body {
      background: var(--background);
      font-family: 'Segoe UI', Arial, sans-serif;
      margin: 0;
      padding: 0;
      color: var(--primary);
    }
    .container {
      max-width: 600px;
      margin: 32px auto;
      background: var(--white);
      border-radius: 12px;
      box-shadow: 0 2px 12px rgba(44,62,80,0.08);
      padding: 32px 24px 24px 24px;
    }
    .banner {
      width: 100%;
      margin-bottom: 24px;
      border-radius: 8px;
      display: block;
    }
    h1 {
      text-align: center;
      color: var(--secondary);
      margin-bottom: 8px;
    }
    h2 {
      color: var(--primary);
      margin-top: 32px;
      margin-bottom: 12px;
      font-size: 1.2em;
    }
    label {
      display: block;
      margin-bottom: 8px;
      font-weight: 500;
    }
    input[type="text"], textarea, select {
      width: 100%;
      padding: 8px;
      border: 1px solid #bbb;
      border-radius: 4px;
      margin-bottom: 16px;
      font-size: 1em;
      background: #fafbfc;
    }
    textarea {
      min-height: 60px;
      resize: vertical;
    }
    .radio-group, .checkbox-group {
      margin-bottom: 16px;
    }
    .radio-group label, .checkbox-group label {
      display: inline-block;
      margin-right: 18px;
      font-weight: 400;
    }
    .progress-bar {
      width: 100%;
      background: #e0e0e0;
      border-radius: 6px;
      margin-bottom: 24px;
      height: 12px;
      overflow: hidden;
    }
    .progress {
      height: 100%;
      background: var(--secondary);
      width: 0;
      transition: width 0.3s;
    }
    .error {
      color: var(--error);
      margin-bottom: 12px;
      font-size: 0.98em;
    }
    .button-group {
      display: flex;
      justify-content: space-between;
      margin-top: 24px;
    }
    button {
      background: var(--secondary);
      color: var(--white);
      border: none;
      padding: 10px 24px;
      border-radius: 4px;
      font-size: 1em;
      cursor: pointer;
      transition: background 0.2s;
    }
    button:disabled {
      background: #b2bec3;
      cursor: not-allowed;
    }
    @media (max-width: 600px) {
      .container {
        padding: 16px 4vw 16px 4vw;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <img src="survey-banner-semestre-3.png" alt="Instituto de Religión Chihuahua Encuesta de Semestre 3" class="banner">
    <h1>Encuesta de Semestre 3</h1>
    <div class="progress-bar"><div class="progress" id="progress"></div></div>
    <form id="surveyForm" autocomplete="off">
      <div id="section-1" class="section">
        <h2>Talleres</h2>
        <label>¿Te gustaría que hubiera talleres en el Instituto?</label>
        <div class="radio-group">
          <label><input type="radio" name="QuiereTalleres" value="Sí" required> Sí</label>
          <label><input type="radio" name="QuiereTalleres" value="No"> No</label>
        </div>
        <div id="talleres-extra" style="display:none;">
          <label>¿Qué tipo de taller te gustaría?</label>
          <input type="text" name="TipoTaller" placeholder="Ejemplo: Música, Manualidades, Escritura, etc.">
          <label>¿En qué formato preferirías las clases?</label>
          <select name="FormatoClases">
            <option value="">Selecciona una opción</option>
            <option value="Presencial">Presencial</option>
            <option value="En línea">En línea</option>
            <option value="Híbrido">Híbrido</option>
          </select>
          <label>¿Qué te motivaría a asistir a un taller?</label>
          <textarea name="Motivacion" placeholder="Escribe tu respuesta aquí..."></textarea>
          <label>¿Tienes alguna sugerencia de taller?</label>
          <textarea name="SugerenciaTaller" placeholder="Escribe tu sugerencia aquí..."></textarea>
        </div>
      </div>
      <div id="section-2" class="section" style="display:none;">
        <h2>Actividades de Verano</h2>
        <label>¿Qué actividades te gustaría que se realizaran en verano?</label>
        <textarea name="ActividadesVerano" placeholder="Ejemplo: Campamento, Servicio, Convivencias, etc."></textarea>
        <label>¿Tienes alguna sugerencia de actividad?</label>
        <textarea name="SugerenciaActividad" placeholder="Escribe tu sugerencia aquí..."></textarea>
      </div>
      <div id="section-3" class="section" style="display:none;">
        <h2>Asistencia y Experiencia</h2>
        <label>¿Con qué frecuencia asistes al Instituto?</label>
        <select name="Asistencia" required>
          <option value="">Selecciona una opción</option>
          <option value="Siempre">Siempre</option>
          <option value="Frecuentemente">Frecuentemente</option>
          <option value="A veces">A veces</option>
          <option value="Rara vez">Rara vez</option>
          <option value="Nunca">Nunca</option>
        </select>
        <label>¿Cuáles son las razones por las que asistes o no asistes?</label>
        <textarea name="Razones" placeholder="Escribe tus razones aquí..."></textarea>
        <label>¿Cómo ha sido tu experiencia en el Instituto?</label>
        <textarea name="Experiencia" placeholder="Comparte tu experiencia aquí..."></textarea>
      </div>
      <div class="error" id="errorMsg" style="display:none;"></div>
      <div class="button-group">
        <button type="button" id="prevBtn" style="display:none;">Anterior</button>
        <button type="button" id="nextBtn">Siguiente</button>
        <button type="submit" id="submitBtn" style="display:none;">Enviar</button>
      </div>
    </form>
    <div id="thankYou" style="display:none; text-align:center; margin-top:32px;">
      <h2>¡Gracias por tu participación!</h2>
      <p>Tu opinión es muy valiosa para nosotros.</p>
    </div>
  </div>
  <script>
    // Section navigation
    const sections = [
      document.getElementById('section-1'),
      document.getElementById('section-2'),
      document.getElementById('section-3')
    ];
    let currentSection = 0;
    const progress = document.getElementById('progress');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const submitBtn = document.getElementById('submitBtn');
    const errorMsg = document.getElementById('errorMsg');
    const form = document.getElementById('surveyForm');
    const thankYou = document.getElementById('thankYou');

    function updateProgress() {
      progress.style.width = ((currentSection + 1) / sections.length * 100) + '%';
    }
    function showSection(idx) {
      sections.forEach((sec, i) => sec.style.display = (i === idx) ? '' : 'none');
      prevBtn.style.display = idx === 0 ? 'none' : '';
      nextBtn.style.display = idx === sections.length - 1 ? 'none' : '';
      submitBtn.style.display = idx === sections.length - 1 ? '' : 'none';
      errorMsg.style.display = 'none';
      updateProgress();
    }
    prevBtn.onclick = () => {
      if (currentSection > 0) {
        currentSection--;
        showSection(currentSection);
      }
    };
    nextBtn.onclick = () => {
      if (validateSection(currentSection)) {
        currentSection++;
        showSection(currentSection);
      }
    };
    function validateSection(idx) {
      errorMsg.style.display = 'none';
      if (idx === 0) {
        const quiereTalleres = form.elements['QuiereTalleres'].value;
        if (!quiereTalleres) {
          errorMsg.textContent = 'Por favor selecciona si te gustaría que hubiera talleres.';
          errorMsg.style.display = '';
          return false;
        }
        if (quiereTalleres === 'Sí') {
          // If "Sí", check at least one of the extra fields is filled
          const tipo = form.elements['TipoTaller'].value.trim();
          const formato = form.elements['FormatoClases'].value;
          const motiv = form.elements['Motivacion'].value.trim();
          const suger = form.elements['SugerenciaTaller'].value.trim();
          if (!tipo && !formato && !motiv && !suger) {
            errorMsg.textContent = 'Por favor llena al menos un campo adicional sobre los talleres.';
            errorMsg.style.display = '';
            return false;
          }
        }
      }
      if (idx === 2) {
        const asistencia = form.elements['Asistencia'].value;
        if (!asistencia) {
          errorMsg.textContent = 'Por favor selecciona tu frecuencia de asistencia.';
          errorMsg.style.display = '';
          return false;
        }
      }
      return true;
    }
    // Show/hide talleres extra fields
    form.elements['QuiereTalleres'].forEach
      ? form.elements['QuiereTalleres'].forEach(radio => {
          radio.addEventListener('change', function() {
            document.getElementById('talleres-extra').style.display = (this.value === 'Sí') ? '' : 'none';
          });
        })
      : Array.from(form.elements['QuiereTalleres']).forEach(radio => {
          radio.addEventListener('change', function() {
            document.getElementById('talleres-extra').style.display = (this.value === 'Sí') ? '' : 'none';
          });
        });
    // On submit
    form.onsubmit = function(e) {
      e.preventDefault();
      if (!validateSection(currentSection)) return;
      // Here you would handle sending the data to your backend or Google Forms
      form.style.display = 'none';
      thankYou.style.display = '';
      updateProgress();
    };
    // Initialize
    showSection(currentSection);
    updateProgress();
    // Show talleres-extra if already selected
    window.addEventListener('DOMContentLoaded', () => {
      const selected = form.elements['QuiereTalleres'].value;
      document.getElementById('talleres-extra').style.display = (selected === 'Sí') ? '' : 'none';
    });
  </script>
</body>
</html>
